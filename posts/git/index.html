

<!DOCTYPE html>
<html
  lang="zh"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="light"
  data-auto-appearance="true"
><head>
  <meta charset="utf-8" />
  
    <meta http-equiv="content-language" content="zh" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>Git查漏补缺 &middot; HeleneWoods</title>
    <meta name="title" content="Git查漏补缺 &middot; HeleneWoods" />
  
  <meta name="description" content="海上种不了花" />
  
  
  
  <link rel="canonical" href="https://helenewoods.github.io/posts/git/" />
  
  
  
  
  
  
  
  
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.52777ff8d016fd2f74608d74ece622594b43e41d4cee46c90249709aa696575a383a64527e4d6f62c1df58c7e78ed891aed8d29939b72b804754307b7c794c5f.css"
    integrity="sha512-Und/&#43;NAW/S90YI107OYiWUtD5B1M7kbJAklwmqaWV1o4OmRSfk1vYsHfWMfnjtiRrtjSmTm3K4BHVDB7fHlMXw=="
  />
  
  
  <script type="text/javascript" src="/js/appearance.min.badab316c9287a5a42a843e4eb45da65bb3d194a5a0f5fa4a3e516160e67df0b8c65f4f19a8e146436e29d583699e6cb41d6bbe99e05e1dbaa877763bad9f8e2.js" integrity="sha512-utqzFskoelpCqEPk60XaZbs9GUpaD1&#43;ko&#43;UWFg5n3wuMZfTxmo4UZDbinVg2mebLQda76Z4F4duqh3djutn44g=="></script>
  
  
  
  
  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  <meta property="og:title" content="Git查漏补缺" />
<meta property="og:description" content="git体系 # 由上图可以看出，git主要由两部分组成，一个是远端仓库，一个是本地仓库。 本地仓库又由一下几个部分组成：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://helenewoods.github.io/posts/git/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-16T20:04:23+08:00" />
<meta property="article:modified_time" content="2022-10-16T20:04:23+08:00" /><meta property="og:site_name" content="HeleneWoods" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Git查漏补缺"/>
<meta name="twitter:description" content="git体系 # 由上图可以看出，git主要由两部分组成，一个是远端仓库，一个是本地仓库。 本地仓库又由一下几个部分组成："/>

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "Git查漏补缺",
    "headline": "Git查漏补缺",
    
    "abstract": "git体系 # 由上图可以看出，git主要由两部分组成，一个是远端仓库，一个是本地仓库。 本地仓库又由一下几个部分组成：",
    "inLanguage": "zh",
    "url" : "https:\/\/helenewoods.github.io\/posts\/git\/",
    "author" : {
      "@type": "Person",
      "name": "Helene Woods"
    },
    "copyrightYear": "2022",
    "dateCreated": "2022-10-16T20:04:23\u002b08:00",
    "datePublished": "2022-10-16T20:04:23\u002b08:00",
    
    "dateModified": "2022-10-16T20:04:23\u002b08:00",
    
    
    
    "mainEntityOfPage": "true",
    "wordCount": "357"
  }]
  </script>


  
  <meta name="author" content="Helene Woods" />
  
    
      <link href="mailto:396293674@qq.com" rel="me" />
    
      <link href="https://github.com/HeleneWoods" rel="me" />
    
  
  
  






  
  
  
  


  
  
</head>
<body
    class="flex flex-col h-screen px-6 m-auto text-lg leading-7 bg-neutral text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral max-w-7xl"
  >
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 dark:bg-neutral-600 focus:translate-y-0"
        href="#main-content"
        ><span class="font-bold ltr:pr-2 rtl:pl-2 text-primary-600 dark:text-primary-400"
          >&darr;</span
        >Skip to main content</a
      >
    </div>
    
    
      <header class="py-6 font-semibold sm:py-10 text-neutral-900 dark:text-neutral print:hidden">
  <nav class="flex justify-between">
    
    <div>
      
        <a
          class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
          rel="me"
          href="/"
          >HeleneWoods</a
        >
      

    </div>
    
    
      <ul class="flex flex-col list-none ltr:text-right rtl:text-left sm:flex-row">
        
          
            <li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
                href="/posts/"
                title="Posts"
                >博文</a
              >
            </li>
          
            <li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2"
                href="/about/"
                title="关于我"
                >关于我</a
              >
            </li>
          
        
        
      </ul>
    
  </nav>
</header>

    
    <div class="relative flex flex-col grow">
      <main id="main-content" class="grow">
        
  <article>
    <header class="max-w-prose">
      
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Git查漏补缺
      </h1>
      <div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
        





  
  



  

  
  
    
  

  

  

  
    
  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2022-10-16 20:04:23 &#43;0800 CST">16 十月 2022</time><span class="px-2 text-primary-500">&middot;</span><span title="预计阅读">2 分钟</span>
    

    
    
  </div>

  
  


      </div>
    </header>
    <section class="flex flex-col max-w-full mt-0 prose lg:flex-row dark:prose-invert">
      
      <div class="min-w-0 min-h-0 max-w-prose">
        <h2 id="git体系" class="relative group">git体系 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git%e4%bd%93%e7%b3%bb" aria-label="锚点">#</a></span></h2>
<p>



  
  
  
    <figure>
      <img class="my-0 rounded-md" src="/images/gitworkflow.png" alt="git" />
      
    </figure>
  


由上图可以看出，git主要由两部分组成，一个是远端仓库，一个是本地仓库。
本地仓库又由一下几个部分组成：</p>
<ul>
<li>工作区：就是我们平时写代码的地方，比如我最常用的就是vscode</li>
<li>暂存区：我们运行<code>git add</code>命令时，代码就会被推到暂存区，起到一个缓存的作用，同时也能帮Git在做diff的时候提高查找性能</li>
<li>本地分支：运行<code>git commit</code>命令后，代码就被提交到本地分支上了，可以在本地<code>.git</code>目录下的<code>refs/heads</code>目录中查看到本地的分支代码信息</li>
<li>远端分支本地副本：执行pull、fetch、push指令时都会往这里更新，它是远程仓库各分支数据在本地的一个副本，<code>.git</code>文件下的<code>refs/remotes</code>目录可以查看到具体信息</li>
</ul>
<h2 id="git工作流程" class="relative group">git工作流程 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git%e5%b7%a5%e4%bd%9c%e6%b5%81%e7%a8%8b" aria-label="锚点">#</a></span></h2>
<p>日常工作中，我们常用流程大概是这样：</p>
<p>在github上建一个新的远程库，或者远程库中已经有数据了</p>
<h3 id="git-init" class="relative group">git init <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-init" aria-label="锚点">#</a></span></h3>
<p>这时本地还没有库，我们先用<code>git init</code>命令初始化一个git仓库</p>
<p>现在远程、本地都有仓库了，但是二者没有任何关联，将他们联系起来有两种情况</p>
<h3 id="git-remote" class="relative group">git remote <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-remote" aria-label="锚点">#</a></span></h3>
<p>如果远程仓库是新建的，没有任何数据，我们需要使用<code>git remote add origin xxx.git</code>添加一个远程版本库到本地，
相应的<code>git remote rm</code>命令是删除远程版本库关联。</p>
<p>然后使用<code>git push -u origin master</code>把当前仓库的master分支和远端仓库的master分支关联起来，这样后续我们push或者pull的时候就可以直接输<code>git push/pull</code>，而不是<code>git push\pull origin master</code>。</p>
<h4 id="git-push后面的-u是什么意思" class="relative group">git push后面的-u是什么意思 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-push%e5%90%8e%e9%9d%a2%e7%9a%84-u%e6%98%af%e4%bb%80%e4%b9%88%e6%84%8f%e6%80%9d" aria-label="锚点">#</a></span></h4>
<p>给<code>git push</code>加一个<code>-u</code>参数，其实就相当于给本地分支定义一个上游分支，让git知道当前操作的是哪条分支。
相当于同时执行了<code>git push origin master</code>和<code>git branch --set-upstream master origin/master</code>
如果一开始没有代入这个参数，直接运行<code>git pull</code>指令时，会出现以下报错




  
  
  
    <figure>
      <img class="my-0 rounded-md" src="/images/gitpullwrong.png" alt="git_pull_wrong" />
      
    </figure>
  


大概意思是没找到当前分支</p>
<h3 id="git-clone" class="relative group">git clone <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-clone" aria-label="锚点">#</a></span></h3>
<p>如果远程库已经有数据了，可以直接在本地库使用<code>git clone xxx.git</code>命令将远程库克隆到本地</p>
<p>这时我们默认是在master分支上</p>
<p>当我们在上面的命令行后添加参数<code>git clone xxx.git -b branch</code>时，会自动给我切换到branch分支上</p>
<h3 id="git-branch" class="relative group">git branch <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-branch" aria-label="锚点">#</a></span></h3>
<p>关于分支的操作有这些：</p>
<ul>
<li><code>git branch</code>：查看本地所有分支信息</li>
<li><code>git branch -r</code>：查看远程仓库所有分支</li>
<li><code>git branch -a</code>：查看本地和远程仓库所有分支</li>
</ul>
<h3 id="git-checkout" class="relative group">git checkout <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-checkout" aria-label="锚点">#</a></span></h3>
<p>如果我们想以当前分支为基准创建一个新的本地分支并切换过去，可以使用<code>git checkout -b branch1</code>命令，
它其实是两个命令合并而成的：<code>git branch branch1</code>创建分支，<code>git checkout branch1</code>切换到该分支上。</p>
<h3 id="git-add" class="relative group">git add <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-add" aria-label="锚点">#</a></span></h3>
<p>当我们在工作区吭哧吭哧敲完代码，根据流程，我们得先把代码添加到暂存区，就需要用到<code>git add</code>命令了</p>
<ul>
<li>我们可以一个一个文件添加到暂存区：<code>git add [filename1] [filename2] ...</code></li>
<li>或者把当前目录下所有文件改动都一口气添加到暂存区：<code>git add .</code></li>
<li>又或者直接把仓库里所有文件改动都添加到暂存区：<code>git add -A</code></li>
</ul>
<h3 id="git-commit" class="relative group">git commit <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-commit" aria-label="锚点">#</a></span></h3>
<p>然后我们就需要把代码推到本地分支上去了：<code>git commit [filename1] ... -m [mesaage]</code>
这个命令有两个参数：</p>
<ul>
<li><code>-m</code>：后面跟的是本次提交的相关信息，可以简单地描述一下本次提交代码做了哪些改动，添加了什么功能</li>
<li><code>-a</code>：对于已经被commit提交过的代码，这个命令相当于执行了<code>git add -A</code>，不需要另外再add一遍了；
对于没有被提交过的文件，还是需要add后才能被commit到本地分支上去</li>
</ul>
<p>一般工作中更多的是使用<code>git commit -m 'do sth'</code>这个命令，也可以使用<code>git commit -am</code>命令，相当于同时执行了<code>git add</code>和<code>git commit</code>。</p>
<h3 id="git-rm" class="relative group">git rm <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-rm" aria-label="锚点">#</a></span></h3>
<p>有添加就有删除，当我们不小心把不需要提交的文件提交到本地仓库了，可以使用<code>git rm [filename]</code>将其删除。</p>
<p><code>git rm -r dist</code>可以直接删除一个目录。</p>
<h3 id="git-push" class="relative group">git push <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-push" aria-label="锚点">#</a></span></h3>
<p>接下来就要正是把代码推送到远程仓库里去了。</p>
<p>如果我们至始至终都在master分支上工作，并且之前初始化本地仓库时运行了<code>git push -u origin master</code>命令，现在只需要输入<code>git push</code>指令就ok了。</p>
<p>如果我们是要将本地创建的分支推送到远端，就需要使用<code>git push --set-upstream origin branch1</code>将分支推上去并关联起来。</p>
<p>有没有觉得这行代码很熟悉？上面git pull的报错图推荐的指令是<code>git branch --set-upstream-to=origin/&lt;branch&gt; test</code>，就是将本地分支和远程分支关联起来。</p>
<p>如果远程仓库中已经有了这个分支时，本地代码没有和远程代码冲突的情况下会直接将本地改动提交上去；</p>
<p>如果出现冲突，就会提示你先把远端分支中的代码pull下来解决冲突，然后再推上去。</p>
<h3 id="git-pull" class="relative group">git pull <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-pull" aria-label="锚点">#</a></span></h3>
<p>当本地分支和远端分支已经建立联系了，我们只需要<code>git pull</code>就能把代码拉到本地，但如果出现上面的情况，</p>
<p>两端没能建立联系，就需要使用<code>git pull origin branch1</code>拉取指定的远端分支到本地分支。</p>
<p>冲突解决后再运行<code>git push --set-upstream origin branch1</code>。</p>
<h3 id="git-fetch" class="relative group">git fetch <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-fetch" aria-label="锚点">#</a></span></h3>
<p>当远端仓库对应分支的代码有了新的变更，而当前工作区的代码还没有修改完成，就可使用<code>git fetch</code>将远端代码先拉到本地仓库</p>
<h3 id="git-merge" class="relative group">git merge <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-merge" aria-label="锚点">#</a></span></h3>
<p>等本地代码写完并提交到本地仓库了，需要合并一下远端分支的更改，就可使用<code>git merge origin/[branchname]</code>。
也可以将指定分支的代码合并到当前分支：</p>
<ol>
<li><code>git checkout master</code>切换到master分支，<code>git pull</code>拉取最新代码</li>
<li>切回开发分支，执行<code>git merge master</code>合并master代码到开发分支中
和上面的代码实现的效果是一样的，只是所有修改都在开发分支里了，master分支上并没有我们提交的修改。
等修改测试后没有问题可以上线了，再切换到master分支，用<code>git merge origin/[branch1]</code>把分支合并到主分支上，然后<code>git push origin master</code></li>
</ol>
<h3 id="git-log" class="relative group">git log <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-log" aria-label="锚点">#</a></span></h3>
<p>提交代码后都可以通过这个指令看到提交记录，这个主要是用来进行代码版本的回滚等操作的</p>
<h3 id="git-reset" class="relative group">git reset <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-reset" aria-label="锚点">#</a></span></h3>
<p>这个指令后面跟着一个参数和一个版本信息。
在你查看git log的时候，会有一行信息大概长这样</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">commit e55c4d273141edff401cbc6642fe21e14681c258 <span class="o">(</span>HEAD -&gt; branch1, origin/branch1<span class="o">)</span>
</span></span></code></pre></div><p>commit后面这一串数字就是这个版本信息，一般都很长，我们可以只复制前7位。
git reset有三个参数：</p>
<ul>
<li><code>--soft</code>：如果你已经将改动commit到本地仓库，<code>git reset --soft e55c4d2</code>可以让本地仓库的内容回到<code>e55c4d2</code>这一次提交，但暂存区和工作区的内容还在</li>
<li><code>--mixed</code>：默认参数，暂存区的内容也会回到指定回滚的版本，工作区的改动还在</li>
<li><code>--hard</code>：直接连工作区的代码都回滚到指定版本，之前所有改动都没有了</li>
</ul>
<h3 id="git-relog" class="relative group">git relog <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-relog" aria-label="锚点">#</a></span></h3>
<p>当你reset之后，在看git log会发现，回滚版本后的所有提交历史都不见了，最新提交记录就是你此时回滚到的版本。
但你发现之后的代码提交中有一部分你依然需要，就可以使用<code>git relog</code>看到所有的操作记录了，然后就可以CV需要的代码了。</p>
<h3 id="git-revert" class="relative group">git revert <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-revert" aria-label="锚点">#</a></span></h3>
<p>这是一个温和版的reset。
reset相当于时间穿越，让你穿越到指定的提交，所以git log看不到reset版本后的记录；
而resvet是产生一个新的提交，把你改动的代码都恢复到指定版本的样子。</p>
<h3 id="git-cherry-pick" class="relative group">git cherry-pick <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-cherry-pick" aria-label="锚点">#</a></span></h3>
<p>一个不常用，但可以救人于水火的功能。
我是小白的时候，在修改代码时总是会忘记切换分支，直接就在master上改了，如果代码已经被commit到本地仓库，就可以<code>git log</code>查看提交记录，复制本应该在分支上提交的commitId，如果有多个提交就全都复制下来，然后切换到需要修改的分支上，使用<code>git cherry-pick master commitId1 commitId2 ...</code>指令。
之后别忘了在master分支上用reset或者revert回滚一下代码。</p>
<h3 id="git-tag" class="relative group">git tag <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-tag" aria-label="锚点">#</a></span></h3>
<p>如果一个项目一直有人维护、更新迭代，就会给它打上标签标注版本。
标签有两种：轻量标签和附注标签</p>
<h4 id="轻量标签" class="relative group">轻量标签 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e8%bd%bb%e9%87%8f%e6%a0%87%e7%ad%be" aria-label="锚点">#</a></span></h4>
<p>创建指令：<code>git tag v1.0.0</code>
一旦创建了标签，就基于当前分支创建了一个不可变的分支，当你切换到这个分支并做任何修改并提交，都无法在分支历史中找到记录，它会帮你生成一个独立提交，commitId可以在如图左下角查看到




  
  
  
    <figure>
      <img class="my-0 rounded-md" src="/images/tag-commit.png" alt="git" />
      
    </figure>
  


你可以通过commitId切换到本次提交，如果需要保留当前提交，可以使用<code>git switch -c &lt;new-branch-name&gt;</code>创建一个新分支，
否则直接<code>git switch -</code>丢弃这次提交。</p>
<h4 id="附注标签" class="relative group">附注标签 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e9%99%84%e6%b3%a8%e6%a0%87%e7%ad%be" aria-label="锚点">#</a></span></h4>
<p>创建指令：<code>git tag -a v1.0.1 -m &quot;发布正式版 1.0.1&quot;</code>
比轻量标签多了两个参数，同时也能保留更多信息，它是存储在Git数据库中的一个完整对象。
<code>git show</code>可以看到标签信息。</p>
<h4 id="推送标签" class="relative group">推送标签 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e6%8e%a8%e9%80%81%e6%a0%87%e7%ad%be" aria-label="锚点">#</a></span></h4>
<p><code>git push origin tagName</code>
创建完标签就能把它推送到远端了。</p>
<h4 id="其它命令" class="relative group">其它命令 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e5%85%b6%e5%ae%83%e5%91%bd%e4%bb%a4" aria-label="锚点">#</a></span></h4>
<ul>
<li><code>git tag</code>：查看标签</li>
<li><code>git tag -l v1.0.1</code>：筛选标签</li>
<li><code>git tag -d v1.0.1</code>：删除本地标签</li>
<li><code>git push origin --delete v1.0.2</code>：删除远程标签</li>
</ul>
<h3 id="git-rebase" class="relative group">git rebase <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#git-rebase" aria-label="锚点">#</a></span></h3>
<p>rebase常常会和merge作比较，从字面意义上看，rebase就是改变基准库。
假设有两个分支，一个master，一个feature




  
  
  
    <figure>
      <img class="my-0 rounded-md" src="/images/rebase-before.png" alt="rebase1" />
      
    </figure>
  


由上图可以看出feature是基于master分支的B节点创建的，之后，在master分支上有一个新提交M，而feature上有两个新提交，C和D。
当我们输入以下指令</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git checkout feature
</span></span><span class="line"><span class="cl">git rebase master
</span></span></code></pre></div><p>提交节点就变成了这样




  
  
  
    <figure>
      <img class="my-0 rounded-md" src="/images/rebase-after.png" alt="rebase2" />
      
    </figure>
  


feature的基底变成了M节点，并且feature上的提交合并到了新基底后面。
如果在rebase时，master分支上没有新提交，那么就不存在换基，效果跟merge就一样了，只是merge指令会多一条记录merge操作的提交记录。
实际工作中建议还是使用merge，因为日志会把每一次提交都记录下来，而rebase会让日志呈线性显示，无法得知最初支线是从哪个节点拉取出来的。</p>
<h3 id="stash" class="relative group">stash <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#stash" aria-label="锚点">#</a></span></h3>
<p>最后说一个特殊区域，git本地除了工作区、暂存区和本地分支外，还有个储存区。
一般我使用它的场景是，
在一个分支工作了一会，突然需要切换到另一个分支上去，又不好把未完成的代码推上去，
就先<code>git stash</code>把变更保存在本地，
等另一个分支的问题解决之后，切换到之前的分支<code>git stash pop</code>把最新stash的更改加回来。
但并不是很推荐这样用，因为一旦忘记就麻烦了。</p>
<h4 id="常用命令" class="relative group">常用命令 <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style="text-decoration-line: none !important;" href="#%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4" aria-label="锚点">#</a></span></h4>
<ul>
<li><code>git stash save 'xxx'</code>：存储变更，如果直接<code>git stash</code>会自动分配储存记录标记</li>
<li><code>git stash list</code>：查看储存区的所有提交列表</li>
<li><code>git stash pop</code>：弹出并引用最近一次存储区的代码提交</li>
<li><code>git stash drop stash@{n}</code>：删除某次储存记录</li>
<li><code>git stash clear</code>：清除所有stash信息</li>
</ul>

      </div>
    </section>
    <footer class="pt-8 max-w-prose print:hidden">
      
  <div class="flex">
    
      
      
        
        <img
          class="w-24 h-24 !mt-0 !mb-0 ltr:mr-4 rtl:ml-4 rounded-full"
          width="96"
          height="96"
          alt="Helene Woods"
          src="/img/avatar_hu14e2de381f6cbd6cb64bcebc8afbdf09_8346_192x192_fill_q75_box_smart1.jpg"
        />
      
    
    <div class="place-self-center">
      
        <div class="text-[0.6rem] leading-3 text-neutral-500 dark:text-neutral-400 uppercase">
          作者
        </div>
        <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
          Helene Woods
        </div>
      
      
      <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="mailto:396293674@qq.com"
          target="_blank"
          aria-label="Email"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1c-27.64 140.9 68.65 266.2 199.1 285.1c19.01 2.888 36.17-12.26 36.17-31.49l.0001-.6631c0-15.74-11.44-28.88-26.84-31.24c-84.35-12.98-149.2-86.13-149.2-174.2c0-102.9 88.61-185.5 193.4-175.4c91.54 8.869 158.6 91.25 158.6 183.2l0 16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98 .0036c-7.299 0-13.2 4.992-15.12 11.68c-24.85-12.15-54.24-16.38-86.06-5.106c-38.75 13.73-68.12 48.91-73.72 89.64c-9.483 69.01 43.81 128 110.9 128c26.44 0 50.43-9.544 69.59-24.88c24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3C495.1 107.1 361.2-9.332 207.8 20.73zM239.1 304.3c-26.47 0-48-21.56-48-48.05s21.53-48.05 48-48.05s48 21.56 48 48.05S266.5 304.3 239.1 304.3z"/></svg>

  </span>

</a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/HeleneWoods"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          >

  <span class="relative inline-block align-text-bottom icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>

</a
        >
      
    
  </div>

</div>
    </div>
  </div>


      

      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="flex group" href="/posts/first-blog/">
              <span
                class="mr-3 ltr:inline rtl:hidden text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&larr;</span
              >
              <span
                class="ml-3 ltr:hidden rtl:inline text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >关于个人博客的建成</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2022-10-15 18:47:08 &#43;0800 CST">15 十月 2022</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
        </span>
      </div>
    </div>
  


      
    </footer>
  </article>

        
          <div
            class="absolute top-[100vh] ltr:right-0 rtl:left-0 w-12 pointer-events-none bottom-0"
          >
            <a
              href="#the-top"
              class="w-12 h-12 sticky pointer-events-auto top-[calc(100vh-5.5rem)] bg-neutral/50 dark:bg-neutral-800/50 backdrop-blur rounded-full text-xl flex items-center justify-center text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400"
              aria-label="Scroll to top"
              title="Scroll to top"
            >
              &uarr;
            </a>
          </div>
        
      </main><footer class="py-10 print:hidden">
  
  
  <div class="flex items-center justify-between">
    <div>
      
      
        <p class="text-sm text-neutral-500 dark:text-neutral-400">
            &copy;
            2022
            Helene Woods
        </p>
      
      
      
        <p class="text-xs text-neutral-500 dark:text-neutral-400">
          
          
          由 <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
            href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href="https://git.io/hugo-congo" target="_blank" rel="noopener noreferrer">Congo</a> 强力驱动
        </p>
      
    </div>
    
    
  </div>
  
  
</footer>

    </div>
  </body>
</html>
